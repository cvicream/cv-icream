import{d as $,y as B,s as r,o as u,c as p,a as o,f as T,j as U}from"./index.386ce6c1.js";import{u as O}from"./user.1b5cdb7e.js";import{u as R}from"./toolbar.600d1855.js";const V={class:"h-[80px] leading-80px text-center bg-white border-b border-b-blacks-20 flex justify-between px-8 py-4"},D=o("div",{class:"flex gap-8"},[o("span",{class:"btn-header bg-primary-10"}),o("button",{class:"btn-icon-48"},[o("span",{class:"i-custom:idea icon-32"})])],-1),z={key:0,class:"flex gap-8"},I=o("span",{class:"i-custom:save icon-32"},null,-1),L=[I],P=o("span",{class:"i-custom:load icon-32"},null,-1),q=[P],G=o("span",{class:"i-custom:download icon-32-fill"},null,-1),H=[G],W=$({props:{isEdit:{type:Boolean}},setup(d){const m=B(),i=O(),l=R(),{template:f,about:a,summary:b,experience:_,project:h,skill:v,education:x,certificate:y,contact:j}=r(i),{currentState:k}=r(l),{layout:g,fontFamily:C,fontSizeScale:E,primaryColour:S,secondaryColour:w}=k.value;function F(){const n={layout:g,fontFamily:C,fontSizeScale:E,primaryColour:S,secondaryColour:w,template:f.value,about:a.value,summary:b.value,experience:_.value,project:h.value,skill:v.value,education:x.value,certificate:y.value,contact:j.value},t=JSON.stringify(n),s=`data:application/json;charset=utf-8,${encodeURIComponent(t)}`,e=["CV"];a.value.name&&e.push(a.value.name),a.value.jobTitle&&e.push(a.value.jobTitle);const J=`${e.join("_")}.cvicream`,c=document.createElement("a");c.setAttribute("href",s),c.setAttribute("download",J),c.click()}async function N(){const n=await A(),t=JSON.parse(n);Object.keys(t).forEach(s=>{i.$patch(e=>{e[s]=t[s]}),l.$patch(e=>{e.currentState[s]=t[s]})})}function A(){return new Promise(n=>{const t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("multiple","false"),t.setAttribute("accept",".cvicream"),t.addEventListener("change",s=>{const{files:e}=s.target;!e||n(e[0].text())},!1),t.click()})}return(n,t)=>(u(),p("header",V,[D,d.isEdit?(u(),p("div",z,[o("button",{class:"btn-icon-48",onClick:F},L),o("button",{class:"btn-icon-48",onClick:N},q),o("button",{class:"btn-icon-48-fill",onClick:t[0]||(t[0]=s=>T(m).push("/edit/download"))},H)])):U("",!0)]))}});export{W as _};
